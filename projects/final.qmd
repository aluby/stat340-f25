---
title: "Final Project"
execute: 
  echo: true
  warning: false
  message: false
---

ðŸš§ Under construction ðŸš§

# What is the project?

The primary goal of the project is to demonstrate competency with the content of the course and show me that you can apply Bayesian thinking and ideas to new settings. The new setting might be a new, complicated dataset, or it might be a new method that we did not talk about in class, but you'd like to explore.

1. Modeling Project
    - You will analyze a dataset using a Bayesian modeling approach. 
    - Your data should be relatively complicated and you should use a model that was not accessible to you after 230/250 (e.g. a hierarchical model, mixture model, etc)
    - Your final project should be motivated by real data and the emphasis should be on comparing different models and drawing real-world conclusions about the data
    
2. Methods Project
    - You will explore a Bayesian method or model that we did not talk about in class
    - You should still include a "real world" data example
    - The emphasis of your project may be on explaining the method or summarizing the papers you read, rather than on the conclusions from the data analysis
    
    
All projects should include: 

 - Some math explaining the modeling approach
 - Analyzing data in R
 - Bayesian tools
 
# Examples for datasets

ðŸš§ Under construction ðŸš§

## General ideas

- Sports datasets, where players are nested in positions (or teams) and teams are nested within divisions, etc. 
    - model P(shot made) using a hierarchical logistic regression
    - model P(make playoffs) based on historical data (e.g. hierarchical levels are years)
    - Good place to start: [SCORE network](https://data.scorenetwork.org/) 
- Education datasets
    - Schools are nested within districts are nested within states. Some predictor variables are at the school level and others are at the district or state level.
- Survey datasets
    - Respondents might be nested within households within census tracts within states, etc. Some predictor variables at each level.
 
## More specific ideas

### Are female hurricanes deadlier than male hurricanes?

> In 2014, a paper was published that was entitled "[Female hurricanes are deadlier than male hurricanes](https://www.pnas.org/doi/10.1073/pnas.1402786111)." As the title suggests,the paper claimed that hurricanes with female names have caused greater loss of life, and the explanation given is that people unconsciously rate female hurricanes as less dangerous and so are less likely to evacuate. 

> Statisticians severely criticized the paper after publication. Here, youâ€™ll explore the complete data used in the paper and consider the hypothesis that hurricanes with female names are deadlier. 

```{r}
library(tidyverse)
hurricanes <- read_delim("https://raw.githubusercontent.com/rmcelreath/rethinking/refs/heads/master/data/Hurricanes.csv")
```

(From Stat Rethinking Problem 11H1)

### Another developmental psychology question

> One hypothesis from developmental psychology, usually attributed to Carol Gilligan, proposes that women and men have different average tendencies in moral reasoning. Like most hypotheses in social psychology, it is merely descriptive. The notion is that women are more concerned with care (avoiding harm), while men are more concerned with justice and rights. Culture-bound nonsense? Yes. Descriptively accurate? Maybe. Evaluate this hypothesis, using the `Trolley` data, supposing that contact provides a proxy for physical harm. Are women more or less bothered by contact than are men, in these data? Figure out the model(s) that is needed to address this question.

(From Stat Rethinking Problem 11H5)

These data comprise outcomes of experimental ethical dilemmas that are often called 'trolley' problems. Data kindly provided by Fiery Cushman.

 - `case`: a code that combines treatment and story labels
 - `response`: participant's rating of appropriateness of action in story
 - `order`: integer order story appeared, within participant
 - `id`: participant id (factor)
 - `age`: participant's age in years
 - `male`: participant's gender; 1 for male, 0 for female
 - `edu`: participant's highest educational level
 - `action`: treatment code for story with action (1) or inaction (0)
 - `intention`: treatment code for intent (1) or lack of intent (0)
 - `contact`: treatmetn code for contact action (1) or lack of contact (0)
 - `story`: factor label for basic scenario modified by treatments
 - `action2`: alternative coding of action that is union of action and contact variables

Cushman et al. 2006. *Psychological Science* 17:1082--1089.

The response here is `response`, which is a rating from 1-7. This does not fit any of the response distributions we've talked about in this class, but is instead an **ordered** response. You should explore how to fit an ordinal regression model (e.g. [here](https://cran.r-project.org/web/packages/rstanarm/vignettes/polr.html)) for this data.

```{r}
Trolley <- read_delim("https://raw.githubusercontent.com/rmcelreath/rethinking/refs/heads/master/data/Trolley.csv")
```

### Bayes Rules

We are not going to do any long homework exercises from Ch18 or Ch19 of *Bayes Rules*, and we're only looking at `sleepstudy` from Ch17. You can pick one of the longer exercises as a starting point, but I'll want to see your final project go a bit beyond the prescribed questions. (Possible datasets: `voices`, `coffee_ratings_small`, `book_banning`, `basketball`, `climbing`; or `spotify` or `big_word_club` using one of the extensions from Ch19)


# Possible topics for new methods 

ðŸš§ Under construction ðŸš§

  - Bayesian Decision Theory
    - One way Bayesian methods can be used is to make an "optimal" decision. This involves defining a "loss function" and calculating the "risk" 
        - Steorts, B. (2016)  [Ch5: Bayesian Risk and Minimaxity](https://www2.stat.duke.edu/~rcs46/books/babybayes-master.pdf)
 - Pareto Smoothed Importance Sampling or WAIC
    - Pareto Smoothed Importance Sampling is a Bayesian approximation to leave-one-out cross validation that is implemented in the Stan [`loo`](https://mc-stan.org/loo/reference/loo.html) procedures. [WAIC](https://mc-stan.org/loo/reference/waic.html) is a Bayesian information criterion (kind of like AIC or BIC). 
    - Vehtari, A., Simpson, D., Gelman, A., Yao, Y., & Gabry, J. (2024). [Pareto smoothed importance sampling](https://www.jmlr.org/papers/v25/19-556.html). Journal of Machine Learning Research, 25(72), 1-58.
    - Watanabe, S., & Opper, M. (2010). [Asymptotic equivalence of Bayes cross validation and widely applicable information criterion in singular learning theory](https://www.jmlr.org/papers/volume11/watanabe10a/watanabe10a.pdf). Journal of machine learning research, 11(12).
 - Bayesian Additive Regression Trees (BART)
    - BART combines regression trees (a popular machine learning approach) with Bayesian estimation and shrinkage priors. This allows for great predictive performance without the typical assumptions needed for regression, while still allowing for formal statistical inference using the Bayesian framework. 
    - Hill, J., Linero, A., & Murray, J. (2020). [Bayesian additive regression trees: A review and look forward](https://www.annualreviews.org/content/journals/10.1146/annurev-statistics-031219-041110). Annual Review of Statistics and Its Application, 7(1), 251-278.
  - Learn how to incorporate measurement error into a Bayesian model
      - When we fit models, we use the response and predictor variables "as-is". But often, these variables have error associated with them. (For example, if we are modeling average income based on average education for each state, both predictors will have some standard error, since they are also estimated)
You are also welcome to choose your own topic! Just please speak with me in advance so we can calibrate your plans. 
      - I really like the Stat Rethinking textbook for a demo of these models for a particular case study
  - Learn how to use Bayesian models for missing data

 
 
 